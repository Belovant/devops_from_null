# Домашнее задание к занятию "4.5. NAT" Белов Антон
**

### Задание 1.
Вы подняли на своём домашнем компьютере с IP-адресом 192.168.0.2 web-сервер.

Получится ли у пользователей интернета открыть этот сайт?
Нужно ли будет вам для этого что-то сделать дополнительно?
Существует ли такой набор настроек провайдера, который не позволит подключение?
Поразмышляйте над примером.

*Приведите ответ в свободной форме.*

Ответ: Напрямую не получится, т.к. IP-адрес сайта - частный. Необходимо перед сайтом поставить маршрутизатор и настроить на нем проброс портов на IP web-сервера, а также настроить проброс портом на оборудовании у провайдера. Если провайдер предоставляет "белый" IP, то достаточно будет настроить собственный роутер. Провайдер может закрыть доступ к сайту, например, ограничив у себя проброс 80 (http) и/или 443 (https) портов.

### Задание 2.
Узел src инициировал соединение с узлом dst.
На маршрутизаторе узла src была создана трансляция:

src local IP:port	src global IP:port	dst IP	protocol
10.0.0.2:1111	93.15.10.2:2222	1.1.1.1:80	tcp

Применив знания по установке TCP сессий, ответьте на вопросы:

Сможет ли злоумышленник доставить пакет до 10.0.0.2, отправив пакет на адрес/порт 93.15.10.2:2222 с адреса 74.5.12.4?
А если злоумышленник подменит source IP-адрес и сгенерирует пакет с source IP:port - 1.1.1.1:80

*Приведите ответ в свободной форме.*

Ответ: нет, не сможет, т.к. маршрутизатор будет ожидать пакет не от 74.5.12.4, а от 1.1.1.1. Даже если хост злоумышленника сгенерирует пакет с 1.1.1.1:80, он все равно не будет доставлен, т.к. хост злоумышленника не участвовал в установке tcp-сессии.

### Задание 3.
Узел src инициировал соединение с узлом dst.
На маршрутизаторе узла src была создана трансляция:

src local IP:port	src global IP:port	dst IP	protocol
10.0.0.2:1111	93.15.10.2:2222	8.8.8.8:53	udp

Применив знания по работе UDP, ответьте на вопросы:

Сможет ли злоумышленник доставить пакет до 10.0.0.2, отправив пакет на адрес/порт 93.15.10.2:2222 с адреса 74.5.12.4?
А если злоумышленник подменит source IP-адрес и сгенерирует пакет с source IP:port - 8.8.8.8:53

*Приведите ответ в свободной форме.*

Ответ: нет, не сможет, т.к. маршрутизатор будет ожидать пакет не от 74.5.12.4, а от 8.8.8.8. А вот, если хост злоумышленника сгенерирует пакет с 8.8.8.8:53, он будет доставлен, т.к. для udp-сессии не требуется трехстороннее рукопожатие.

### Задание 4.
Найдите самую часто встречающуюся проблему при работе клиентов за NAT с протоколом FTP, связанную с особенностью работы FTP (на лекции по портам эта особенность упоминалась).

В чём выражается проблема?
Почему она возникает?
Что можно сделать, чтобы избежать этой проблемы?
*Приведите ответ в свободной форме.*

Ответ: самая частая проблема в схеме, когда FTP-сервер находится за NAT - это невозможность подключения к нему извне. Происходит это из-за того, что для работы FTP используется 20 и 21 порты для управления, а так же пул динамических портов, по которым передаются данные. Чтобы избежать возникновение проблемы подключения требуется открыть вышеуказанные порты и насроить необходимые трансляции. 

**

Дополнительные задания (со звездочкой*)
Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### Задание 5.
Вспомните схему из 3-го урока.

![image](https://user-images.githubusercontent.com/107868869/191015019-e6a6f32b-6843-4cfb-a675-162c0b489a5d.png)

Немного перефразируем прошлый вопрос.

Поразмышляете, можно ли каким-то образом отправлять пакеты с компьютера 192.168.1.2 на компьютер 192.168.1.3 если они подключены согласно приведённой ниже схеме?
Если да, то что и как бы вы предложили настроить? Как и к чему нужно подключаться?
*Приведите ответ в свободной форме.*

Ответ: для того чтобы отправлять пакеты с компьютера 192.168.1.2 на компьютер 192.168.1.3 по схеме и чтобы они доходили до назначения, необходимо настроить на маршрутизаторе 192.168.1.1 для 192.168.1.2 проброс портов на его внешний интерфейс, а на маршрутизаторе 192.168.1.254 проброс портов на 192.168.1.3 при получении пакетов с его внешнего интерфейса.
